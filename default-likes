if(typeof cd_time!=='undefined'){countdown(cd_time,1);}
function submit_feed(){do_captcha();loading.open();$.ajax({type:'post',dataType:'json',url:base_url+'services/likes/feed',data:$('#form_feed').serialize()}).done(function(response){loading.close();if(response.status==="success"){$("#image > a > img").prop('src',response.data.image);$("#image > a").prop('href',response.data.link);$('#field_feed').addClass('hidden');$('#field_action').removeClass('hidden');}else{message('error',response.error);}}).fail(function(){loading().close();message('error','Something went wrong! Please try again.');});}
function submit_action(){count=0;countMax=parseInt($('#form_action input[name=quantity]').val());do_captcha();loading.open();$.ajax({type:'post',dataType:'json',url:base_url+'services/likes/check',data:$('#form_action').serialize()}).done(function(response){loading.close();if(response.status==="success"){if(typeof response.credits!=='undefined'){$("#credits").text(response.credits)}
start();action();}else{message('error',response.error);}}).fail(function(){loading().close();message('error','Something went wrong! Please try again.');});}
function action(){$.ajax({type:'post',dataType:'json',url:base_url+'services/likes/action',data:$('#form_action').serialize()}).done(function(response){if(response.status==="success"){count=parseInt(count+response.success);$('#form_action input[name=quantity]').val(countMax-count);$('#credits').text(response.credits);if(count>countMax){action();}else{complete(count,response.credits);}}else{message('error',response.error);complete();}}).fail(function(){setTimeout(action,3000);});}
function start(){$('#form_action input').prop('readonly',true);$('#form_action button').html('<i class="fas fa-circle-notch fa-spin"></i>').prop('disabled',true);}
function complete(c=false,c2=0){$('#form_action input').prop('readonly',false);$('#form_action button').html('Submit').prop('disabled',false);$('#form_action input[name=quantity]').val('');if(c){if(0<c2){c2r=0;}else{c2r=1;}
message('success','Delivered Quantity: '+c,c2r);}}